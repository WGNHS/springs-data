!(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit-element"),require("wgnhs-common")):"function"==typeof define&&define.amd?define(["exports","lit-element","wgnhs-common"],t):t((e=e||self).lit={},e.common,e.common)})(this,function(e,t,i){"use strict";class a extends t.LitElement{static get properties(){return{file:{type:String}}}constructor(){super()}static get styles(){return t.css`a{text-decoration:none}.download-button:hover{color:var(--palette-900)}.download-button:focus{outline:thin dotted}.download-button{display:flex;flex-direction:row;justify-content:space-between;align-items:center;cursor:pointer;text-align:center;background:var(--palette-white);color:var(--palette-accent);border:1px solid var(--palette-light);border-radius:var(--border-radius);padding:var(--font-size);margin:var(--border-radius) 0}.download-button>div{display:flex;align-items:center}.icon{font-size:var(--icon-size-extra-large)}`}render(){return t.html`<style>@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);@import url(https://fonts.googleapis.com/icon?family=Material+Icons);body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);background-color:var(--palette-white)}body,h1,h2,h3,h4,h5,p{color:var(--palette-black);font-family:var(--font-family);padding:0;margin:0;box-sizing:border-box}h1,h2,h3,h4,h5{padding:.25em 0 .75em 0;font-weight:var(--font-weight-bold)}h1{font-size:var(--font-size-extra-large);color:var(--palette-accent)}h2{font-size:var(--font-size-large)}p{line-height:1.4em;margin:0 0 1em 0}a{color:var(--palette-900);cursor:pointer;text-decoration-line:underline;text-decoration-style:dashed;text-decoration-color:var(--palette-accent-transparent)}</style><a class=download-button href=${this.file} target=_blank download><div><span>Download</span></div><div><i class="icon material-icons" title=Download>save_alt</i></div></a>`}}customElements.define("download-section",a);class o extends t.LitElement{static get properties(){return{inName:{type:String,attribute:"in-name"},choices:{type:Array},choice:{type:String,reflect:!0}}}constructor(){super(),this.checked=[],this.genId=(function(){const e={};return function(t){return e[t]||(e[t]=i.genId()),e[t]}})()}firstUpdated(){!this.choice&&this.choices&&(this.choice=this.choices[0])}inChange(e){this.choice=e.target.value;let t=new CustomEvent("choice-change",{detail:{choice:this.choice}});this.dispatchEvent(t)}render(){return t.html`${this.choices.map((e,i)=>t.html`<div class=choice><input type=radio name=${this.inName} id=${this.genId(i)} value=${e} .checked=${this.choice===e} @change=${this.inChange}> <label for=${this.genId(i)}>${e}</label></div>`)}`}}customElements.define("in-radio",o);class s extends t.LitElement{static get properties(){return{genId:{type:String,attribute:!1},open:{type:Boolean,reflect:!0},button:{type:Boolean}}}constructor(){super(),this.genId=i.genId()}static get styles(){return t.css`.wrap-collapsible{margin:var(--border-radius) 0}input[type=checkbox]{display:none}.lbl-toggle{display:block;font-weight:var(--font-weight-bold);font-size:var(--font-size-extra-large);text-align:center;padding:var(--border-radius);color:var(--palette-accent);background:var(--palette-light);cursor:pointer;border-radius:var(--border-radius);transition:all .3s cubic-bezier(.755,.05,.855,.06)}.lbl-toggle:hover{color:var(--palette-900)}.lbl-toggle:focus{outline:thin dotted}.collapsible-content{max-height:0;overflow:hidden;transition:max-height .3s cubic-bezier(.86,0,.07,1)}.wrap-collapsible:not([button]) .toggle:checked~.collapsible-content{max-height:var(--collapsible-max-height,3000px)}.wrap-collapsible:not([button]) .toggle:checked~.lbl-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0;transition:border 0s}.collapsible-content .content-inner{background:var(--palette-white);border-bottom:1px solid var(--palette-light);border-right:1px solid var(--palette-light);border-left:1px solid var(--palette-light);border-bottom-left-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);padding:var(--font-size)}.collapsible-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between}`}render(){return t.html`<div class=wrap-collapsible ?button=${this.button}><input id=${this.genId} class=toggle type=checkbox ?checked=${this.open} @change=${this._handleChange}> <label for=${this.genId} class=lbl-toggle tabindex=0><div class=collapsible-header><div><slot name=header-before></slot></div><div><slot name=header></slot></div><div><slot name=header-after></slot></div></div></label><div class=collapsible-content><div class=content-inner><slot name=content></slot></div></div></div>`}firstUpdated(){let e=this.renderRoot.querySelectorAll(".lbl-toggle");Array.from(e).forEach(e=>{e.addEventListener("keydown",t=>{32!==t.which&&13!==t.which||(t.preventDefault(),e.click())})})}updated(e){e.has("open")&&i.dispatch(this,"open",{value:this.open})}_handleChange(e){this.open=e.target.checked}}customElements.define("app-collapsible",s);class r extends t.LitElement{static get properties(){return{title:{type:String},tabs:{type:Array}}}constructor(){super()}static get styles(){return t.css`:host{padding:0 var(--border-radius)}`}switchTab(e){this.shadowRoot.querySelectorAll("slot").forEach(t=>{"default"===e&&!t.getAttribute("name")||t.getAttribute("name")===e?t.hidden=!1:t.hidden=!0})}handleChoiceChange(e){this.switchTab(e.detail.choice)}render(){return t.html`${this.title?t.html`<h1 class=header>${this.title}</h1>`:""}<slot></slot>${this.tabs?this.tabs.map(e=>t.html`<slot name=${e} hidden></slot>`):""}`}}customElements.define("app-sidebar",r);const n=[t.css`a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}:focus{outline:0}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{-webkit-appearance:none;-moz-appearance:none}input[type=search]{-webkit-appearance:none;-moz-appearance:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}textarea{overflow:auto;vertical-align:top;resize:vertical}audio,canvas,video{display:inline-block;max-width:100%}audio:not([controls]){display:none;height:0}[hidden]{display:none}html{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a:focus{outline:thin dotted}a:active,a:hover{outline:0}img{border:0;-ms-interpolation-mode:bicubic}figure{margin:0}form{margin:0}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0;white-space:normal}button,input,select,textarea{font-size:100%;margin:0;vertical-align:baseline}button,input{line-height:normal}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=search]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}button,html,input,select,textarea{color:#222}::-moz-selection{background:#b3d4fc;text-shadow:none}::selection{background:#b3d4fc;text-shadow:none}img{vertical-align:middle}fieldset{border:0;margin:0;padding:0}textarea{resize:vertical}.chromeframe{margin:.2em 0;background:#ccc;color:#000;padding:.2em 0}`,...[t.css`@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWJ0bbck.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFUZ0bbck.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWZ0bbck.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVp0bbck.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWp0bbck.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFW50bbck.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;font-display:swap;src:local('Open Sans Regular'),local('OpenSans-Regular'),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0b.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}`,t.css`@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v48/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2) format('woff2')}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}`,t.css`body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);background-color:var(--palette-white)}body,h1,h2,h3,h4,h5,p{color:var(--palette-black);font-family:var(--font-family);padding:0;margin:0;box-sizing:border-box}h1,h2,h3,h4,h5{padding:var(--border-radius) 0 var(--font-size-small) 0;font-weight:var(--font-weight-bold)}h1{font-size:var(--font-size-extra-large);color:var(--palette-accent)}h2{font-size:var(--font-size-large)}p{line-height:var(--line-height);margin:0 0 var(--font-size) 0}a{color:var(--palette-900);cursor:pointer;text-decoration-line:underline;text-decoration-style:dashed;text-decoration-color:var(--palette-900)}`]];class l extends t.LitElement{static get properties(){return{open:{type:Boolean,attribute:"open-modal",reflect:!0},source:{type:String}}}constructor(){super(),this.open=!1}static get styles(){return[...n,t.css`.modal{position:fixed;background:var(--palette-accent-transparent);top:0;left:0;right:0;bottom:0;z-index:var(--z-index-interrupt);display:flex;align-items:center;justify-content:center}.modal-window{position:relative;padding:.5em;border-radius:var(--border-radius);background:var(--palette-light)}.modal-content{max-height:90vh;max-width:90vw}.modal-close{position:absolute;top:0;right:0;border-radius:var(--border-radius)}.control{display:flex;justify-content:center;align-items:center;font-size:var(--icon-size-large);color:var(--palette-accent);text-align:center;cursor:pointer;padding:var(--border-radius);background-color:var(--palette-light);border:none;border-radius:50%}[data-closed]{display:none}`]}render(){return t.html`<div class="modal b-close-modal" role=dialog aria-hidden=true ?data-closed=${!this.open} @click=${this.handleClick}><div class=modal-window><button class="control modal-close b-close-modal"><i class="material-icons b-close-modal" title=Hide>close</i></button> ${this.source?t.html`<img class=modal-content src=${this.source}>`:""}</div></div>`}toggleOpen(){this.open=!this.open}handleClick(e){e.target.classList.contains("b-close-modal")&&this.toggleOpen()}}customElements.define("modal-dialog",l);class c extends t.LitElement{static get properties(){return{}}constructor(){super()}static get styles(){return t.css`.loader{color:var(--palette-900);font-size:90px;text-indent:-9999em;overflow:hidden;width:1em;height:1em;border-radius:50%;margin:72px auto;position:relative;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-animation:load6 1.7s infinite ease,round 1.7s infinite ease;animation:load6 1.7s infinite ease,round 1.7s infinite ease}@-webkit-keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}100%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@keyframes load6{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}100%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@-webkit-keyframes round{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes round{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}`}render(){return t.html`<div class=loader>Loading...</div>`}}customElements.define("app-spinner",c);customElements.define("button-link",class extends t.LitElement{static get properties(){return{href:{type:String},target:{type:String},download:{type:Boolean}}}constructor(){super()}static get styles(){return t.css`a{text-decoration:none;margin:var(--border-radius) 0}.button-link:hover{color:var(--palette-900)}.button-link:focus{outline:thin dotted}.button-link{display:block;font-weight:var(--font-weight-bold);font-size:var(--font-size-extra-large);text-align:center;cursor:pointer;text-align:center;background:var(--palette-light);color:var(--palette-accent);border-radius:var(--border-radius);padding:var(--border-radius)}.wrap-content{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.icon{font-size:var(--icon-size-extra-large)}`}render(){return t.html`<a class=button-link href=${this.href} target=${this.target} ?download=${this.download}><div class=wrap-content><div><slot name=content-before></slot></div><div><slot name=content></slot></div><div><slot name=content-after></slot></div></div></a>`}});const d=window["pdfjs-dist/build/pdf"],h="toggle-pdf-panel";class m{render(e){if(e){let t=document.createElement("canvas");return d.getDocument(e).promise.then(function(e){return e.getPage(1)}).then(function(e){var i=e.getViewport({scale:1}),a=t,o=a.getContext("2d");a.height=i.height,a.width=i.width;var s={canvasContext:o,viewport:i};return e.render(s).promise}).then(function(){return t.toDataURL()})}return Promise.reject(null)}}class p extends t.LitElement{static get properties(){return{pdfsrc:{type:String,attribute:!1},rotate:{type:Number},zoom:{type:Number}}}constructor(){super(),this.cache={},this.renderer=new m,this.rotate=0,this.zoom=1}static get styles(){return[...n,t.css`:host{overflow:auto}.container{min-height:10em;display:grid;grid-column-template:1fr;grid-gap:var(--border-radius);justify-content:center}.content{max-width:45vw}.controls{display:grid;grid-column-template:1fr;grid-gap:var(--border-radius);position:absolute;top:0;right:var(--border-radius);margin:var(--border-radius);z-index:10}.control{display:flex;justify-content:center;align-items:center;font-size:var(--icon-size-large);color:var(--palette-accent);text-align:center;cursor:pointer;padding:var(--border-radius);background-color:var(--palette-light);border:none;border-radius:50%}[data-closed]{display:none}`]}render(){return t.html`<div class=controls><button class=control @click=${this.hide}><i class=material-icons title=Hide>close</i></button> <button class=control @click=${this.zoomIn} ?disabled=${this.isMaxZoom}><i class=material-icons title="Zoom In">zoom_in</i></button> <button class=control @click=${this.zoomOut} ?disabled=${this.isMinZoom}><i class=material-icons title="Zoom Out">zoom_out</i></button> <button class=control @click=${this.rotateLeft}><i class=material-icons title="Rotate Left">rotate_left</i></button> <button class=control @click=${this.rotateRight}><i class=material-icons title="Rotate Right">rotate_right</i></button></div><app-spinner ?data-closed=${this.imgsrc}></app-spinner><div class=container ?data-closed=${!this.imgsrc}>${this.imageTag}<slot></slot></div>`}get imgsrc(){return this.cache[this.pdfsrc]}static get MOD_ROTATE(){return 4}get rotate(){return this._rotate}set rotate(e){const t=this.rotate;let i=Math.round(e)+p.MOD_ROTATE;this._rotate=i%p.MOD_ROTATE,this.requestUpdate("rotate",t)}rotateLeft(){this.rotate-=1}rotateRight(){this.rotate+=1}static get MAX_ZOOM(){return 2}get isMaxZoom(){return this.zoom>=p.MAX_ZOOM}static get MIN_ZOOM(){return.5}get isMinZoom(){return this.zoom<=p.MIN_ZOOM}get zoom(){return this._zoom}set zoom(e){const t=this.zoom;this._zoom=Math.min(Math.max(e,p.MIN_ZOOM),p.MAX_ZOOM),this.requestUpdate("zoom",t)}zoomIn(){this.zoom+=.25}zoomOut(){this.zoom-=.25}get translate(){let e={x:0,y:0};return this.rotate&&(e.x=1===this.rotate?0:100*this.zoom,e.y=3===this.rotate?0:100*this.zoom),e}get imageTag(){return this.imgsrc?t.html`<img class=content src=${this.imgsrc} style=${this.contentTransform}>`:""}get contentTransform(){let e=this.rotate/p.MOD_ROTATE,t=this.zoom,i=this.translate;return`\n      transform-origin: top left;\n      transform: rotate(${e}turn) translate(-${i.x}%, -${i.y}%) scale(${t})\n      `}show(e){this.dispatchEvent(new CustomEvent(h,{bubbles:!0,composed:!0,detail:{url:e,closed:!1}})),this.pdfsrc=e,this.removeAttribute("data-closed")}hide(){this.pdfsrc=null,this.setAttribute("data-closed",!0),this.dispatchEvent(new CustomEvent(h,{bubbles:!0,composed:!0,detail:{closed:!0}}))}_getFromCache(e){return new Promise((t,i)=>{let a=this.cache[e];a?t(a):i("Not in cache")})}request(e){return this._getFromCache(e).catch(()=>this.renderer.render(e).then(t=>(this.cache[e]=t,this.requestUpdate("cache"),t)))}}customElements.define("pdf-view-panel",p);class u extends t.LitElement{static get properties(){return{src:{type:String},panel:{type:Object,attribute:!1},missing:{type:Boolean,attribute:!1}}}constructor(){super(),this.missing=!0,this.alt=!1}static get styles(){return[...n,t.css`.container{display:grid;grid-template-columns:1fr 1fr;grid-gap:var(--border-radius)}[data-closed]{display:none}`]}render(){return t.html`<div class=container ?data-closed=${this.missing}><button-link href=${this.src} target=_blank download><i slot=content-before class=material-icons title=Download>save_alt</i> <span slot=content>Download</span></button-link><app-collapsible @open=${this.toggle} button><span slot=header>View</span> <i slot=header-after class=material-icons title=View>${this.alt?"chevron_left":"chevron_right"}</i></app-collapsible></div>`}updated(e){(e.has("panel")||e.has("src"))&&(this.handleMissingPDF(),this.panel&&this.src&&this.panel.request(this.src).then(this.handleLoadedPDF.bind(this),this.handleMissingPDF.bind(this)))}toggle(e){this.alt?this.panel.hide():this.panel.show(this.src)}handleMissingPDF(){this.missing||(this.missing=!0)}handleLoadedPDF(){this.missing&&(this.missing=!1)}handleAlt(e){e.detail.url===this.src?this.alt=!0:this.alt=!1,this.requestUpdate()}connectedCallback(){super.connectedCallback(),this.__altHandler=this.handleAlt.bind(this),document.addEventListener(h,this.__altHandler)}disconnectedCallback(){document.removeEventListener(h,this.__altHandler),super.disconnectedCallback()}}customElements.define("pdf-view-button",u);class g extends t.LitElement{static get properties(){return{siteinfo:Object}}constructor(){super()}static get styles(){return t.css`text{font-size:var(--font-size-small);font-weight:700;fill:#414c43}.container{display:flex;flex-direction:column;align-items:center}`}render(){return t.html`<div class=container><svg id=bed-materials-chart></svg></div>`}firstUpdated(){this.chart=d3.select(this.renderRoot.querySelector("#bed-materials-chart"))}updated(){var e=Math.min(500,300)/2-30;this.chart.attr("width",500).attr("height",300);var t=this.chart.append("g").attr("transform","translate(250,150)"),i=t.append("g").attr("class","donutSegments"),a=(t.append("g").attr("class","chartLabels"),t.append("g").attr("class","leaderLines"),[{material:"organic",percent:this.siteinfo.Percent_organic,color:"#406058"},{material:"fines",percent:this.siteinfo.Percent_fines,color:"#adcaba"},{material:"sand",percent:this.siteinfo.Percent_sand,color:"#b7b098"},{material:"gravel",percent:this.siteinfo.Percent_gravel,color:"#cccccc"},{material:"cobble",percent:this.siteinfo.Percent_cobble,color:"#7b6888"},{material:"boulder",percent:this.siteinfo.Percent_boulder,color:"#514b47"},{material:"bedrock",percent:this.siteinfo.Percent_bedrock,color:"#98abc5"}]),o=d3.pie().sort(null).value(function(e){return e.percent})(a).filter(function(e){return e.value>0}),s=d3.arc().outerRadius(e).innerRadius(e-45).padAngle(.025);function r(e){return e.startAngle+(e.endAngle-e.startAngle)/2}i.selectAll("path").data(o).enter().append("path").attr("d",s).attr("fill",function(e){return e.data.color}).style("opacity",1);var n=d3.arc().innerRadius(1.1*e).outerRadius(1.1*e);this.chart.select(".chartLabels").selectAll("text").data(o).enter().append("text").html(function(e){return e.data.percent+"% "+e.data.material}).attr("dy",".35em").attr("transform",function(t){var i=n.centroid(t);return i[0]=1.15*e*(r(t)<Math.PI?1:-1),"translate("+i+")"}).style("text-anchor",function(e){return r(e)<Math.PI?"start":"end"}),this.chart.select(".leaderLines").selectAll("polyline").data(o).enter().append("polyline").attr("stroke","#333333").attr("stroke-width",1).style("fill","none").attr("points",function(t){var i=n.centroid(t);return i[0]=1.1*e*(r(t)<Math.PI?1:-1),[s.centroid(t),n.centroid(t),i]})}}customElements.define("site-bed-materials",g);const f=function(e){return e?e.toFixed(2):null},b={pH:{title:"pH",desc:"Measured as close to spring source as possible."},Conductivity_uS:{title:"Specific Conductance (µmho/cm)",desc:"Measured as close to spring source as possible (µmho/cm)."},Water_Temp_C:{title:"Temperature (°C)",desc:"Measured as close to spring source as possible (°C)."},SpringID:{title:"Spring ID",desc:"Unique identifier within county."},County:{title:"County",desc:"County where spring is located."},Surveyor:{title:"Surveyor(s)",desc:"Who conducted the survey (initials)."},Date:{title:"Date",desc:"Date of field survey.",transform:function(e){return e?new Date(e).toISOString().substring(0,10):null}},Time:{title:"Time",desc:"Start time."},Easting_WTM:{title:"Easting (WTM)",desc:"Easting (WTM). As close to the spring source as possible.",transform:f},Northing_WTM:{title:"Northing (WTM)",desc:"Northing (WTM). As close to the spring source as possible.",transform:f},Horz_Precision_m:{title:"Horizontal Precision (meters)",desc:"Horizontal accuracy of GPS position (meters)."},Max_PDOP:{title:"Maximum PDOP",desc:"Maximum positional dilution of precision (PDOP) during measurement."},Elevation_m:{title:"Elevation (meters)",desc:"From digital elevation model (DEM) (meters).",transform:f},elevation_source:{title:"Elevation Source",desc:"DEM source and horizontal resolution of DEM used to extract elevation."},Land_Owner:{title:"Land Ownership",desc:"List: state, county, city, NPS, USFS, tribal, military, private, other."},Access:{title:"Access",desc:"Directions to springs."},Ease_Access:{title:"Ease of Access",desc:"List: Easy access, Difficult access, Terrain prohibits access to other potential spring areas."},Land_Cover:{title:"Land Cover",desc:"List: urban, residential, agriculture, grassland, forest, open water, wetland, barren, shrubland, other."},Air_Temp_F:{title:"Air Temperature (°F)",desc:"Air temperature on date surveyed (°F)."},Cloud_Cover_percent:{title:"Cloud Cover (%)",desc:"Cloud cover at time of survey (%)."},Wind_Speed_mph:{title:"Wind Speed (mph)",desc:"Velocity measurement on date surveyed (mph)."},Aspect_degrees:{title:"Aspect",desc:"Direction that the spring orifice faces."},Slope_degrees:{title:"Slope (°)",desc:"Channel slope (°)."},Slope_Variability:{title:"Slope Variability",desc:"List: high, medium, low, none."},Condition:{title:"Condition",desc:"List: undisturbed, light, moderate, high."},Type_of_Disturbance:{title:"Type of Disturbance",desc:"List: wildlife, livestock, recreation, diversion, residence, impounded, dredging, flooding, trails, roadway, invasives, spring house, encased, raceways, human-made structure, trash, storm-water, drain tile, agriculture, other."},Spring_Area_sqm:{title:"Spring Area (m²)",desc:"List: <2 m², 2-10 m², 10-100 m², 100-1000 m², 1000-10,000 m², 10,000-100,000 m²"},Surface_Types:{title:"Surface Type(s)",desc:"List: backwall, colluvial slope, sloping bedrock, pool, channel, spring mound, cave, other."},Width_ft:{title:"Channel or Pool Width (feet)",desc:"If a channel or pool exists, the mean width (feet)."},Width_Location:{title:"Width Location",desc:"List: pool, channel, pond, spring house, other."},Depth_cm:{title:"Channel or Pool Depth (cm)",desc:"If a channel or pool exists, the mean depth (cm)."},Depth_Location:{title:"Depth Location",desc:"List: pool, channel, pond, spring house, other."},Percent_organic:{title:"Percent Organic",desc:"Qualitative estimate of the % organics. Described as close to spring source as possible."},Percent_fines:{title:"Percent Fines",desc:"Qualitative estimate of the % fines. Described as close to spring source as possible."},Percent_sand:{title:"Percent Sand",desc:"Qualitative estimate of the % sand. Described as close to spring source as possible."},Percent_gravel:{title:"Percent Gravel",desc:"Qualitative estimate of the % gravel. Described as close to spring source as possible."},Percent_cobble:{title:"Percent Cobble",desc:"Qualitative estimate of the % cobble. Described as close to spring source as possible."},Percent_boulder:{title:"Percent Boulder",desc:"Qualitative estimate of the % boulder. Described as close to spring source as possible."},Percent_bedrock:{title:"Percent Bedrock",desc:"Qualitative estimate of the % bedrock. Described as close to spring source as possible."},Bedrock_Comp:{title:"Bedrock Composition",desc:"List: shale, siltstone, sandstone, conglomerate, limestone, dolomite, igneous or metamorphic, NA, other."},Spring_Type:{title:"Spring Type",desc:"List: helocrene, rheocrene, limnocrene, hillslope spring, cased, flowing well, other."},Spring_Source:{title:"Spring Source",desc:"List: single orifice, multiple orifices, diffuse flow, other."},Orifice_Geom:{title:"Orifice Geomorphic Type",desc:"List: seepage/filtration, fracture, tubular, contact."},Discharge_cfs:{title:"Discharge (cfs)",desc:"Spring flow (cfs)."},Flow_Accuracy:{title:"Flow Accuracy",desc:"Level of accuracy of flow measurement, List: low, high"},Discharge_Meas:{title:"How Measured",desc:"List: timed volume, float velocity method, flume, AA meter, AD meter (acoustic Doppler meter), EM meter (electromagnetic meter)."},Flow_Location:{title:"Flow Location",desc:"Where flow was measured."},Flow_percent:{title:"Flow %",desc:"Percent of flow captured (%)."},Veg_Bed_Cover_percent:{title:"Vegetative Bed Cover (%)",desc:"The proportion of the spring pool bed or channel bed that is covered by live vegetation (%)."},Veg_Bank_Cover_percent:{title:"Vegetative Bank Cover (%)",desc:"The proportion of the spring pool banks or channel banks that is covered by live vegetation (%)."},Notes:{title:"Notes",desc:"Other notes as necessary."},GlobalID:{title:"Global ID",desc:"Automatically generated unique and global ID"},gps_time_date:{title:"GPS time and date",desc:"Automatically generated GPS time and date stamp"},sat_signals:{title:"Number of satellites",desc:"Automatically generated number of satellites visible"}};d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var e=this.parentNode.firstChild;e&&this.parentNode.insertBefore(this,e)})};class v extends t.LitElement{static get properties(){return{siteinfo:Object}}constructor(){super()}static get styles(){return t.css`
            .label{
               font-weight: bold;
            }
            .tick {
               font-size: 13px;

               /* why did I have to add this in?? */
               font-family: 'open_sansregular','Open Sans',sans_serif;

               color: #777;
            }
            .tick line {
               stroke: #777;
            }
            .annotation {
               font-size: 14px;
            }

            .container {
               display: flex;
               flex-direction: column;
               align-items: center;
            }
        `}render(){return t.html`
        <div class="container">
        <!-- <h2>Water quality</h2> -->

       <!-- <span class="label">conductivity: </span><span>${this.siteinfo.Conductivity_uS}</span><br> -->
         <svg id="conductivity-chart"></svg><br>
       <!-- <span class="label">temperature: </span><span>${this.siteinfo.Water_Temp_C}</span><br> -->
         <svg id="temperature-chart"></svg><br>
       <!-- <span class="label">pH: </span><span>${this.siteinfo.pH}</span><br> -->
         <svg id="ph-chart"></svg>
        </div>
    `}firstUpdated(){this.phchart=d3.select(this.renderRoot.querySelector("#ph-chart")),this.temperaturechart=d3.select(this.renderRoot.querySelector("#temperature-chart")),this.conductivitychart=d3.select(this.renderRoot.querySelector("#conductivity-chart"));this.siteinfo.pH,this.siteinfo.Water_Temp_C,this.siteinfo.Conductivity_uS;var e={svg:this.phchart,label:"pH",attributeKey:"pH",tickValues:[5.5,6,6.5,7,7.5,8,8.5,9,9.5,10],chartMin:5.5,chartMax:10,siteInfo:this.siteinfo,allData:aggrData.data},t={svg:this.temperaturechart,attributeKey:"Water_Temp_C",tickValues:[5,7,9,11,13,15,17],chartMin:5,chartMax:17,siteInfo:this.siteinfo,allData:aggrData.data},i={svg:this.conductivitychart,attributeKey:"Conductivity_uS",tickValues:[0,250,500,750,1e3,1250,1500,1750],chartMin:0,chartMax:1750,siteInfo:this.siteinfo,allData:aggrData.data};this.tempPlot=new y(t),this.phPlot=new y(e),this.condPlot=new y(i),this.tempPlot.draw(),this.phPlot.draw(),this.condPlot.draw()}updated(){this.tempPlot.annotate(this.siteinfo.Site_Code),this.phPlot.annotate(this.siteinfo.Site_Code),this.condPlot.annotate(this.siteinfo.Site_Code)}}customElements.define("site-water-quality",v);class y{constructor(e){this.options=e,this.svgWidth=400,this.svgHeight=130,this.margin={top:50,right:20,bottom:50,left:20},this.chartWidth=this.svgWidth-this.margin.left-this.margin.right,this.chartHeight=this.svgHeight-this.margin.top-this.margin.bottom}get x_scale(){return d3.scaleLinear().domain([this.options.chartMin,this.options.chartMax]).range([0,this.chartWidth])}get y_scale(){return d3.scaleBand().domain([""]).rangeRound([0,this.chartHeight])}draw(){var e=this.options;e.svg.attr("width",this.svgWidth).attr("height",this.svgHeight);var t=e.svg.append("g").attr("class","chartgroup").attr("transform","translate("+this.margin.left+", "+this.margin.top+")");t.append("g").attr("class","x-axis").attr("transform","translate(0,"+this.chartHeight+")").call(d3.axisBottom(this.x_scale).tickSizeInner(-this.chartHeight).tickSizeOuter(0).tickPadding(5).tickValues(e.tickValues)).call(e=>e.select(".domain").remove()),t.append("g").attr("class","y-axis").call(d3.axisLeft(this.y_scale).tickSizeInner(-this.chartWidth).tickSizeOuter(0).tickPadding(0)).call(e=>e.select(".domain").remove()).call(e=>e.selectAll("text").remove()),this.circles=t.append("g").attr("class","circles");var i=this.chartHeight;this.circles.selectAll("g").data(e.allData,e=>e.Site_Code).enter().append("g").append("circle").attr("cx",t=>this.x_scale(t[e.attributeKey])).attr("cy",e=>this.chartHeight/2-i/2+Math.random()*i).attr("r",3).attr("fill","#406058").attr("stroke","#000").attr("stroke-width",0).attr("opacity","0.7").attr("class",e=>e.Site_Code).on("click",e=>{console.log("switch to "+e.Site_Code)}).on("mouseenter",e=>{this.highlight(e.Site_Code)}).on("mouseleave",e=>{this.unhighlight(e.Site_Code)})}annotate(e){var t=this.options,i=(t.allData,this.circles.selectAll("g").filter(t=>t.Site_Code===e).moveToFront());i.select("circle").attr("r",6).attr("fill","#000").attr("stroke","#eee").attr("stroke-width",2).attr("opacity","0.85"),i.append("text").attr("dy","-1em").html(e=>b[t.attributeKey].title+": "+e[t.attributeKey])}highlight(e){this.circles.selectAll("g").filter(t=>t.Site_Code===e).moveToFront().select("circle").attr("stroke-width",3).attr("opacity","0.85")}unhighlight(e){this.circles.selectAll("g").filter(t=>t.Site_Code===e).moveToFront().select("circle").attr("stroke-width",0).attr("opacity","0.7")}}e.AppCollapsible=s,e.AppSidebar=r,e.AppSpinner=c,e.DownloadSection=a,e.InRadio=o,e.ModalDialog=l,e.PDFViewButton=u,e.PDFViewPanel=p,e.SiteBedMaterials=g,e.SiteWaterQuality=v,e.styles=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
